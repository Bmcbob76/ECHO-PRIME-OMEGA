import { ServerResult } from '../types.js';
export interface ToolCallRecord {
    timestamp: string;
    toolName: string;
    arguments: any;
    output: ServerResult;
    duration?: number;
}
interface FormattedToolCallRecord extends Omit<ToolCallRecord, 'timestamp'> {
    timestamp: string;
}
declare class ToolHistory {
    private history;
    private readonly MAX_ENTRIES;
    private readonly historyFile;
    private writeQueue;
    private isWriting;
    private writeInterval?;
    constructor();
    /**
     * Load history from disk (all instances share the same file)
     */
    private loadFromDisk;
    /**
     * Trim history file to prevent it from growing indefinitely
     */
    private trimHistoryFile;
    /**
     * Async write processor - batches writes to avoid blocking
     */
    private startWriteProcessor;
    /**
     * Flush queued writes to disk
     */
    private flushToDisk;
    /**
     * Add a tool call to history
     */
    addCall(toolName: string, args: any, output: ServerResult, duration?: number): void;
    /**
     * Get recent tool calls with filters
     */
    getRecentCalls(options: {
        maxResults?: number;
        toolName?: string;
        since?: string;
    }): ToolCallRecord[];
    /**
     * Get recent calls formatted with local timezone
     */
    getRecentCallsFormatted(options: {
        maxResults?: number;
        toolName?: string;
        since?: string;
    }): FormattedToolCallRecord[];
    /**
     * Get current stats
     */
    getStats(): {
        totalEntries: number;
        oldestEntry: string;
        newestEntry: string;
        historyFile: string;
        queuedWrites: number;
    };
    /**
     * Cleanup method - clears interval and flushes pending writes
     * Call this during shutdown or in tests
     */
    cleanup(): Promise<void>;
}
export declare const toolHistory: ToolHistory;
export {};
